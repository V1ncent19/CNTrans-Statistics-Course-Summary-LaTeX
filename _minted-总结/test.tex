\documentclass[11pt,a4paper]{ctexart}
%以下为所使用的宏包
\usepackage{ulem}%下划线
\usepackage{amsmath,amsfonts,amssymb,amsthm,amsbsy}%数学符号
\usepackage{graphicx}%插入图片
\usepackage{booktabs}%三线表
%\usepackage{indentfirst}%首行缩进
\usepackage{tikz}%作图
\usepackage{appendix}%附录
\usepackage{array}%多行公式/数组
\usepackage{makecell}%表格缩并
\usepackage{siunitx}%SI单位
\usepackage{mathrsfs}%数学字体
\usepackage{enumitem}%列表间距
\usepackage{multirow}%列表横向合并单元格
\usepackage[colorlinks,linkcolor=red,anchorcolor=blue,citecolor=green]{hyperref}%超链接引用
\usepackage{float}%图片、表格位置排版
\usepackage{pict2e,keyval,fp,diagbox}%带有斜线的表格
\usepackage{fancyvrb,listings}%设置代码插入环境
\usepackage{minted}%代码环境设置
\usepackage{fontspec}%字体设置
\usepackage{color,xcolor}%颜色设置



%以下是页边距设置
\usepackage[left=1in,right=1in,top=0.81in,bottom=0.8in]{geometry}

%以下是段行设置
\linespread{1.4}%行距
\setlength{\parskip}{0.1\baselineskip}%段距
\setlength{\parindent}{2em}%缩进

%其他设置
\numberwithin{equation}{section}%公式按照章节编号
\newenvironment{point}{\raggedright$\blacktriangleright$}{}%新环境，用于标示重点内容

%代码环境lst设置
\definecolor{CodeBlue}{HTML}{268BD2}
\definecolor{CodeBlue2}{HTML}{0000CD}
\definecolor{CodeGreen}{HTML}{2AA1A2}
\definecolor{CodeRed}{HTML}{CB4B16}
\definecolor{CodeYellow}{HTML}{B58900}
\definecolor{CodePurple}{HTML}{D33682}
\definecolor{CodeGreen2}{HTML}{859900}

% \lstdefinestyle{RLanguage}{
%     basicstyle=\fontsize{10.5pt}{10.5pt}\selectfont
%     language=R,
%     commentstyle=\color{CodeYellow},
%     keywordstyle=\color{CodeBlue},
%     numberstyle=\tiny\color{CodePurple},
%     stringstyle=\color{CodeGreen},
%     frame=single,
%     xleftmargin=2em,
%     xrightmargin=2em,
%     aboveskip=1em
% }

\lstset{
    basicstyle=\fontspec{Consolas},
    numbers=left, %设置行号位置
    numberstyle=\tiny\color{black}, %设置行号大小
    keywordstyle=\color{black}, %设置关键字颜色
    stringstyle=\color{CodeRed}, %设置字符串颜色
    commentstyle=\color{CodeGreen}, %设置注释颜色
    frame=single, %设置边框格式
    escapeinside=``, %逃逸字符(1左面的键)，用于显示中文
    %breaklines, %自动折行
    extendedchars=false, %解决代码跨页时，章节标题，页眉等汉字不显示的问题
    xleftmargin=2em,xrightmargin=2em, aboveskip=1em, %设置边距
    tabsize=4, %设置tab空格数
    showspaces=false, %不显示空格
    emph={TRUE,FALSE,NULL,NAN,NA,\$,<-,::},emphstyle=\color{CodeBlue2},
}

\begin{document}




\begin{lstlisting}[language=R]
    stringr::str_c()
    library('plyr')
    x <- factor(c('alpha','beta','gamma','alpha'))
    levels(x)[levels(x)=='alpha'] <- 'two'
    library('plyr')#aaaaabbbb
    levels(x)
    levels(x)[2] <- 'two'
    levels(x)
    library('stringr')
    stringr::str_replace_all(levels(x),'^alpha$','one')
    x
    x <- factor(c('a','b','a','a'),levels = c('a','b','c'))
    levels(x)
    x <- factor(x)
    droplevels()
    df <- data.frame(x = factor(c("alpha", "beta", "alpha"), 
      levels = c("alpha", "beta", "gamma")), y = c(5, 8, 2), 
      z = factor(c("red", "green", "green"), levels = c("red", 
        "green", "blue")))
    df$x

\end{lstlisting} 


\end{document}